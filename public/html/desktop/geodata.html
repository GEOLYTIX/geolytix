<style>

  @import url("https://fonts.googleapis.com/css?family=PT+Mono");

  .location-view {
    font-family: "PT Mono";
  }

  .legend>svg {
    width: 100%;
  }

  .geodata__select {
    font-size: 18px;
  }

  .geodata__select>div {
    margin-bottom: 5px;
    border-bottom: 10px solid white;
  }

  .geodata__select>div:hover {
    border-bottom: 10px solid black;
    cursor: pointer;
  }

  @media screen and (max-width: 1100px) {
    #geodata {
      display: none;
    }
  }
</style>


<div id="geodata" data-offset=80 class="section">
  <h1 class="bold">GeoData</h1>
  <h2 class="bold primary-colour">Where people live, work, study and shop</h2>
  <h3 class="bold">We create novel datasets using Open Data as inputs, to help with your network strategy and location based decisions.</h3>

  <div style="display: grid; grid-template-columns: 270px 300px 1fr; margin-top: 50px;">

    <div id="geodata__select" class="geodata__select" style="grid-row: 1; grid-column: 1;">

        <div data-locale="London" data-layers="Retail Points">Retail Points</div>

        <div data-locale="London" data-layers="Census">Census</div>

        <div data-locale="London" data-layers="LAD,OA">Admin Boundaries</div>

        <div data-locale="London" data-layers="Education,University building">Education</div>

        <div data-locale="London" data-layers="Grocery Demand">Grocery Demand</div>

        <div data-locale="London" data-layers="Points of Interest">Points of Interest</div>

        <div data-locale="London" data-layers="Postal Sector,Postal District,Postal Areas">Postal</div>

        <div data-locale="London" data-layers="Rail Lines,Rail Stations">Public Transport</div>

        <div data-locale="London" data-layers="Residential">Residential</div>

        <div data-locale="London" data-layers="Retail Places">Retail Places</div>

        <div data-locale="London" data-layers="Road Network">Road Network</div>

        <div data-locale="London" data-layers="Seamless towns and suburbs">Seamless towns and suburbs</div>

        <div data-locale="London" data-layers="Town and suburb">Town and suburb</div>

        <div data-locale="London" data-layers="Urbanity">Urbanity</div>

        <div data-locale="London" data-layers="Workers">Workers</div>

        <div data-faq=true>FAQ</div>

    </div>

    <div id="geodata__info" class="geodata__info" style="grid-row: 1; grid-column: 2; background-color: #f0f0f0; padding: 10px;">
    </div>

    <div class="geodata__content" style="grid-row: 1; grid-column: 3; position: relative;">
      <div class="btn-column" style="position: absolute; height: 100%; padding: 4px; background-color: #fff; opacity: 0.8; box-shadow: inset 4px 0 4px -4px #777;">
        <button class="btn-zoomin enabled"><div class="xyz-icon icon-add"></div></button>
        <button class="btn-zoomout enabled" disabled><div class="xyz-icon icon-remove"></div></button>
        <a class="btn-fullscreen enabled" target="_blank"><div class="xyz-icon icon-fullscreen"></div></a>
      </div>
      <div id="map_geodata" class="map" ></div>
    </div>

    <div id="geodata__faq" style="display: none; z-index: 999; background-color: white; grid-row: 1; grid-column: 2/4; grid-gap: 30px; grid-template-rows: min-content min-content min-content min-content min-content min-content min-content; grid-row-gap: 0;">
      <div class="bold" style="grid-column: 1; grid-row:1;">IS THE DATA I PURCHASE LICENSED?</div>
      <div class="bold" style="grid-column: 2; grid-row:1;">CAN I PUBLISH THE DATA?</div>
      <div style="grid-column: 1; grid-row:2; margin-bottom: 10px;">Yes, our aim is to keep licensing simple and transparent. All prices shown are for an annual right to use. This includes full corporate use with no restrictions on user numbers.</div style="grid-column: 2; grid-row:1">
      <div style="grid-column: 2; grid-row:2; margin-bottom: 10px;">The prices shown are for internal business use only. If you would like to use the data in a website or in a commercial product we’d be delighted to discuss options so please get in touch.</div>
      <div class="bold" style="grid-column: 1; grid-row:3">WHAT SOFTWARE CAN THE DATA BE USED IN?</div>
      <div class="bold" style="grid-column: 2; grid-row:3">I CAN’T TELL IF THE DATA IS WHAT I NEED?</div>
      <div style="grid-column: 1; grid-row:4; margin-bottom: 10px;">We provide our data in all formats commonly used by desktop GIS, spatial databases and web mapping applications. We’re more than happy to discuss, whatever your software requirements are.</div style="grid-column: 2; grid-row:1">
      <div style="grid-column: 2; grid-row:4; margin-bottom: 10px;">Then please get in touch. We’d be delighted to pay a visit and take you through the data with examples of the benefits and how it can be used.</div style="grid-column: 2; grid-row:1">
      <div class="bold" style="grid-column: 1; grid-row:5">HOW OFTEN IS THE DATA UPDATED?</div>
      <div class="bold" style="grid-column: 2; grid-row:5">I’M INTERESTED, HOW DO I BUY?</div>
      <div style="grid-column: 1; grid-row:6; margin-bottom: 10px;">Every pack is updated at least annually, with some packs updated every quarter. Ask for more details.</div style="grid-column: 2; grid-row:1">
      <div style="grid-column: 2; grid-row:6; margin-bottom: 10px;">Please get in touch, we can send you the data asap and provide payment details.</div style="grid-column: 2; grid-row:1">
      <div class="bold" style="grid-column: 1; grid-row:7">CAN I SEE A USER GUIDE / DOCUMENTATION?</div>
      <div class="bold" style="grid-column: 2; grid-row:7">HOW DOES THE DATA ARRIVE?</div>
      <div style="grid-column: 1; grid-row:8; margin-bottom: 10px;">Yes of course, please get in touch and we will send the same day.</div style="grid-column: 2; grid-row:1">
      <div style="grid-column: 2; grid-row:8; margin-bottom: 10px;">We can send a link to download, memory stick or DVD.</div style="grid-column: 2; grid-row:1">
    </div>

  </div>

</div>


<script>

  window.addEventListener('DOMContentLoaded', function(){

    document.querySelectorAll('#geodata__select > div').forEach(function (el) {

      el.onclick = function () {

        document.querySelector('#geodata__select > .bold') && document.querySelector('#geodata__select > .bold').classList.remove('bold');

        el.classList.add('bold');

        document.getElementById('map_geodata').innerHTML = '';
        document.querySelector('.geodata__info').innerHTML = '';

        if (el.dataset.faq) return document.getElementById('geodata__faq').style.display = 'grid';

        document.getElementById('geodata__faq').style.display = 'none';

        if (_xyz) _xyz({
          host: 'https://xyz-geodata-v2.now.sh/geodata',
          locale: el.dataset.locale,
          callback: function (_xyz) {

            _xyz.mapview.create({
              target: document.getElementById('map_geodata'),
              attribution: {}
            });

            el.dataset.layers.split(',').forEach(function (layer) {

              _xyz.layers.list[layer].show();

              if (_xyz.layers.list[layer].groupmeta) {
                document.querySelector('.geodata__info').innerHTML = _xyz.layers.list[layer].groupmeta;
              }

              if (_xyz.layers.list[layer].style.theme || _xyz.layers.list[layer].format === 'grid') {
                document.querySelector('.geodata__info').appendChild(_xyz.layers.view.style.legend(_xyz.layers.list[layer]));
              }

              _xyz.map.updateSize();
            });

            const btnZoomIn = document.querySelector('.geodata__content > .btn-column > .btn-zoomin');
            btnZoomIn.onclick = function (e) {
              const z = parseInt(_xyz.map.getView().getZoom() + 1);
              _xyz.map.getView().setZoom(z);
              e.target.disabled = (z >= _xyz.workspace.locale.maxZoom);
            }

            const btnZoomOut = document.querySelector('.geodata__content > .btn-column > .btn-zoomout');
            btnZoomOut.onclick = function (e) {
              const z = parseInt(_xyz.map.getView().getZoom() - 1);
              _xyz.map.getView().setZoom(z);
              e.target.disabled = (z <= _xyz.workspace.locale.minZoom);
            }

            _xyz.mapview.node.addEventListener('changeEnd', function () {
              const z = _xyz.map.getView().getZoom();
              btnZoomIn.disabled = z >= _xyz.workspace.locale.maxZoom;
              btnZoomOut.disabled = z <= _xyz.workspace.locale.minZoom;
            });

            document.querySelector('.geodata__content > .btn-column > .btn-fullscreen').href = "https://xyz-geodata-v2.now.sh/geodata?layers=Mapbox Baselayer,Mapbox Labels," + el.dataset.layers + "&locale=London";

            _xyz.locations.selectCallback = location => {

              const locationview = _xyz.utils.wire()`<div class="location-view" style="padding: 10px;">`;

              locationview.appendChild(_xyz.locations.view.infoj(location));

              _xyz.mapview.popup.create({
                coords: location.marker,
                content: locationview
              });

            }

          }
        });

      }
    });

    document.querySelector('#geodata__select > div').click();

  })

</script>